<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::section})}">
<section>
  <div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2>
        <img th:src="@{/img/pokemon/usuarios/nurse_joy.svg}" alt="Usuarios" width="40" class="me-2">
        Gestión de Usuarios
      </h2>
      <a class="btn btn-primary btn-sm" th:href="@{/usuarios/nuevo}">
        <i class="bi bi-person-plus"></i> Nuevo Usuario
      </a>
    </div>

    <div class="table-responsive shadow-sm border rounded">
      <table class="table table-hover table-striped mb-0">
        <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Email</th>
          <th>Rol</th>
          <th>Activo</th>
          <th>Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="usuario : ${usuarios}">
          <td th:text="${usuario.id}">1</td>
          <td th:text="${usuario.nombre}">Ash</td>
          <td th:text="${usuario.apellido}">Ketchum</td>
          <td th:text="${usuario.email}">ash@pokemon.com</td>
          <td>
            <span class="badge bg-success" th:if="${usuario.rol == 'ADMIN'}">ADMIN</span>
            <span class="badge bg-secondary" th:if="${usuario.rol == 'OPERADOR'}">OPERADOR</span>
          </td>
          <td>
            <i class="bi" th:classappend="${usuario.activo} ? 'bi-check-circle-fill text-success' : 'bi-x-circle-fill text-danger'"></i>
          </td>
          <td>
            <a th:href="@{'/usuarios/editar/' + ${usuario.id}}" class="btn btn-warning btn-sm me-1">
              <i class="bi bi-pencil"></i>
            </a>
            <a th:href="@{'/usuarios/eliminar/' + ${usuario.id}}" class="btn btn-danger btn-sm"
               onclick="return confirm('¿Estás seguro de eliminar este usuario?')">
              <i class="bi bi-trash"></i>
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
</html>
